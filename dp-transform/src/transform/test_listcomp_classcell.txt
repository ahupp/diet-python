$ listcomp classcell

def classcell_values():
    class C:
        def method(self):
            super()
            return __class__
        items = [(lambda: i) for i in range(5)]
        y = [x() for x in items]

    return C.y, C().method(), C
=
def classcell_values():

    def _dp_ns_C(_dp_class_ns):

        def _dp_lambda_8():
            return __name__
        _dp_lambda_8 = __dp__.update_fn(_dp_lambda_8, "classcell_values.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "__module__", __dp__.class_lookup(_dp_class_ns, "__name__", _dp_lambda_8))
        __dp__.setattr(_dp_class_ns, "__qualname__", "classcell_values.<locals>.C")

        def method(self):
            super()
            return __class__

        def _dp_lambda_9():
            return method
        _dp_lambda_9 = __dp__.update_fn(_dp_lambda_9, "classcell_values.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "method", __dp__.update_fn(__dp__.class_lookup(_dp_class_ns, "method", _dp_lambda_9), "classcell_values.<locals>.C", "<locals>"))

        def _dp_gen_1(_dp_iter_2):
            _dp_iter_3 = __dp__.iter(_dp_iter_2)
            try:
                while True:
                    i = __dp__.next(_dp_iter_3)

                    def _dp_lambda_4():
                        return i
                    _dp_lambda_4 = __dp__.update_fn(_dp_lambda_4, "classcell_values.<locals>.C", "<lambda>")
                    yield _dp_lambda_4
            except:
                if __dp__.exception_matches(__dp__.current_exception(), StopIteration):
                    pass
                else:
                    raise
        _dp_gen_1 = __dp__.update_fn(_dp_gen_1, "classcell_values.<locals>.C", "<locals>")
        _dp_gen_1 = __dp__.update_fn(_dp_gen_1, "classcell_values.<locals>.C", "<genexpr>")

        def _dp_lambda_10():
            return range
        _dp_lambda_10 = __dp__.update_fn(_dp_lambda_10, "classcell_values.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "items", __dp__.list(_dp_gen_1(__dp__.iter(__dp__.class_lookup(_dp_class_ns, "range", _dp_lambda_10)(5)))))

        def _dp_gen_5(_dp_iter_6):
            _dp_iter_7 = __dp__.iter(_dp_iter_6)
            try:
                while True:
                    x = __dp__.next(_dp_iter_7)
                    yield x()
            except:
                if __dp__.exception_matches(__dp__.current_exception(), StopIteration):
                    pass
                else:
                    raise
        _dp_gen_5 = __dp__.update_fn(_dp_gen_5, "classcell_values.<locals>.C", "<locals>")
        _dp_gen_5 = __dp__.update_fn(_dp_gen_5, "classcell_values.<locals>.C", "<genexpr>")

        def _dp_lambda_11():
            return items
        _dp_lambda_11 = __dp__.update_fn(_dp_lambda_11, "classcell_values.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "y", __dp__.list(_dp_gen_5(__dp__.iter(__dp__.class_lookup(_dp_class_ns, "items", _dp_lambda_11)))))
    C = __dp__.create_class("C", _dp_ns_C, (), None)
    return C.y, getattr(C(), "method")(), C
