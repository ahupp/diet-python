$ nested async comprehension
from __future__ import annotations

import asyncio


async def asynciter(items):
    for item in items:
        await asyncio.sleep(0)
        yield item


async def nested():
    return [[i + j async for i in asynciter([1, 2])] for j in [10, 20]]


async def gen_inside_gen():
    gens = ((i async for i in asynciter(range(j))) for j in [3, 5])
    return [x for g in gens async for x in g]


def get_values():
    return asyncio.run(nested())


def get_gen_values():
    return asyncio.run(gen_inside_gen())
=
asyncio = __dp__.import_("asyncio", __spec__)
async def asynciter(items):
    _dp_iter_1 = __dp__.iter(items)
    try:
        while True:
            item = __dp__.next(_dp_iter_1)
            await asyncio.sleep(0)
            yield item
    except:
        if __dp__.exception_matches(__dp__.current_exception(), StopIteration):
            pass
        else:
            raise
async def nested():

    def _dp_gen_2(_dp_iter_3):
        _dp_iter_4 = __dp__.iter(_dp_iter_3)
        try:
            while True:
                j = __dp__.next(_dp_iter_4)

                async def _dp_gen_5(_dp_iter_6):
                    _dp_iter_7 = __dp__.aiter(_dp_iter_6)
                    try:
                        while True:
                            i = await __dp__.anext(_dp_iter_7)
                            yield __dp__.add(i, j)
                    except:
                        if __dp__.exception_matches(__dp__.current_exception(), StopAsyncIteration):
                            pass
                        else:
                            raise
                _dp_gen_5 = __dp__.update_fn(_dp_gen_5, "nested.<locals>", "<genexpr>")
                yield __dp__.list(_dp_gen_5(asynciter(__dp__.list((1, 2)))))
        except:
            if __dp__.exception_matches(__dp__.current_exception(), StopIteration):
                pass
            else:
                raise
    _dp_gen_2 = __dp__.update_fn(_dp_gen_2, "nested.<locals>", "<genexpr>")
    return __dp__.list(_dp_gen_2(__dp__.iter(__dp__.list((10, 20)))))
async def gen_inside_gen():

    def _dp_gen_12(_dp_iter_13):
        _dp_iter_14 = __dp__.iter(_dp_iter_13)
        try:
            while True:
                j = __dp__.next(_dp_iter_14)

                async def _dp_gen_15(_dp_iter_16):
                    _dp_iter_17 = __dp__.aiter(_dp_iter_16)
                    try:
                        while True:
                            i = await __dp__.anext(_dp_iter_17)
                            yield i
                    except:
                        if __dp__.exception_matches(__dp__.current_exception(), StopAsyncIteration):
                            pass
                        else:
                            raise
                _dp_gen_15 = __dp__.update_fn(_dp_gen_15, "gen_inside_gen.<locals>", "<genexpr>")
                yield _dp_gen_15(asynciter(range(j)))
        except:
            if __dp__.exception_matches(__dp__.current_exception(), StopIteration):
                pass
            else:
                raise
    _dp_gen_12 = __dp__.update_fn(_dp_gen_12, "gen_inside_gen.<locals>", "<genexpr>")
    gens = _dp_gen_12(__dp__.iter(__dp__.list((3, 5))))

    async def _dp_gen_8(_dp_iter_9):
        _dp_iter_10 = __dp__.iter(_dp_iter_9)
        try:
            while True:
                g = __dp__.next(_dp_iter_10)
                _dp_iter_11 = __dp__.aiter(g)
                try:
                    while True:
                        x = await __dp__.anext(_dp_iter_11)
                        yield x
                except:
                    if __dp__.exception_matches(__dp__.current_exception(), StopAsyncIteration):
                        pass
                    else:
                        raise
        except:
            if __dp__.exception_matches(__dp__.current_exception(), StopIteration):
                pass
            else:
                raise
    _dp_gen_8 = __dp__.update_fn(_dp_gen_8, "gen_inside_gen.<locals>", "<genexpr>")
    return __dp__.list(_dp_gen_8(__dp__.iter(gens)))
def get_values():
    return asyncio.run(nested())
def get_gen_values():
    return asyncio.run(gen_inside_gen())
