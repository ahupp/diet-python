$ class delayed classcell

from __future__ import annotations


def exercise():
    test_namespace = None

    class Meta(type):
        def __new__(cls, name, bases, namespace):
            nonlocal test_namespace
            test_namespace = namespace
            return None

    class A(metaclass=Meta):
        @staticmethod
        def f():
            return __class__

    B = type("B", (), test_namespace)
    return A, B, B.f()
=
def exercise():
    test_namespace = None

    def _dp_ns_Meta(_dp_class_ns):

        def _dp_lambda_1():
            return __name__$0
        _dp_lambda_1 = __dp__.update_fn(_dp_lambda_1, "exercise.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "__module__", __dp__.class_lookup(_dp_class_ns, "__name__", _dp_lambda_1))
        __dp__.setattr(_dp_class_ns, "__qualname__", "exercise.<locals>.Meta")

        def __new__(cls, name, bases, namespace):
            test_namespace$1 = namespace
            return None

        def _dp_lambda_2():
            return __new__$0
        _dp_lambda_2 = __dp__.update_fn(_dp_lambda_2, "exercise.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "__new__", __dp__.update_fn(__dp__.class_lookup(_dp_class_ns, "__new__", _dp_lambda_2), "exercise.<locals>.Meta", "<locals>"))
    Meta = __dp__.create_class("Meta", _dp_ns_Meta, (type$0,), None)

    def _dp_ns_A(_dp_class_ns):

        def _dp_lambda_3():
            return __name__$0
        _dp_lambda_3 = __dp__.update_fn(_dp_lambda_3, "exercise.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "__module__", __dp__.class_lookup(_dp_class_ns, "__name__", _dp_lambda_3))
        __dp__.setattr(_dp_class_ns, "__qualname__", "exercise.<locals>.A")

        def f():
            return __class__

        def _dp_lambda_4():
            return f$0
        _dp_lambda_4 = __dp__.update_fn(_dp_lambda_4, "exercise.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "f", __dp__.update_fn(__dp__.class_lookup(_dp_class_ns, "f", _dp_lambda_4), "exercise.<locals>.A", "<locals>"))

        def _dp_lambda_5():
            return staticmethod$0
        _dp_lambda_5 = __dp__.update_fn(_dp_lambda_5, "exercise.<locals>", "<lambda>")

        def _dp_lambda_6():
            return f$0
        _dp_lambda_6 = __dp__.update_fn(_dp_lambda_6, "exercise.<locals>", "<lambda>")
        __dp__.setattr(_dp_class_ns, "f", __dp__.class_lookup(_dp_class_ns, "staticmethod", _dp_lambda_5)(__dp__.class_lookup(_dp_class_ns, "f", _dp_lambda_6)))
    A = __dp__.create_class("A", _dp_ns_A, (), __dp__.dict((("metaclass", Meta),)))
    B = type$0("B", (), test_namespace)
    return A, B, B.f()
