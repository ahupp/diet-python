$ async with nonawaitable aenter
from __future__ import annotations

import asyncio


class CM:
    async def __aenter__(self):
        return 1

    async def __aexit__(self, exc_type, exc, tb):
        return False


async def run():
    async with CM():
        return "body"


def get_error():
    try:
        asyncio.run(run())
    except TypeError as exc:
        return str(exc)
    return "no error"
=
asyncio = __dp__.import_("asyncio", __spec__)
def _dp_create_class_CM():

    def _dp_ns_builder(_dp_class_ns):

        def _dp_lambda_1():
            return __name__$0
        _dp_lambda_1 = __dp__.update_fn(_dp_lambda_1, "<lambda>", "<lambda>")
        _dp_class_ns.__module__ = __dp__.class_lookup(_dp_class_ns, "__name__", _dp_lambda_1)
        _dp_class_ns.__qualname__ = "CM"

        async def _dp_fn___aenter__(self):
            return 1
        _dp_class_ns.__aenter__ = __dp__.update_fn(_dp_fn___aenter__, "CM", "__aenter__")

        async def _dp_fn___aexit__(self, exc_type, exc, tb):
            return False
        _dp_class_ns.__aexit__ = __dp__.update_fn(_dp_fn___aexit__, "CM", "__aexit__")
    return __dp__.create_class("CM", _dp_ns_builder, (), None)
CM = _dp_create_class_CM()
async def _dp_fn_run():
    _dp_with_enter_3 = await __dp__.with_aenter(CM$0())
    _ = __dp__.getitem(_dp_with_enter_3, 0)
    _dp_with_exit_4 = __dp__.getitem(_dp_with_enter_3, 1)
    _dp_with_active_5 = True
    try:
        return "body"
    except:
        _dp_with_active_5 = False
        await __dp__.with_aexit(_dp_with_exit_4, __dp__.exc_info())
    finally:
        if _dp_with_active_5:
            await __dp__.with_aexit(_dp_with_exit_4, None)
        _dp_with_exit_4 = None
        _dp_with_enter_3 = None
run = __dp__.update_fn(_dp_fn_run, None, "run")
del _dp_fn_run
def _dp_fn_get_error():
    try:
        asyncio$0.run(run$0())
    except:
        if __dp__.exception_matches(__dp__.current_exception(), TypeError$0):
            exc = __dp__.current_exception()
            try:
                return str$0(exc)
            finally:
                try:
                    del exc
                except:
                    if __dp__.exception_matches(__dp__.current_exception(), NameError$0):
                        pass
                    else:
                        raise
        else:
            raise
    return "no error"
get_error = __dp__.update_fn(_dp_fn_get_error, None, "get_error")
del _dp_fn_get_error
