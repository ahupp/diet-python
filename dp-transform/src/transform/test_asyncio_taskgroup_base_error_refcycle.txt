$ asyncio taskgroup base error refcycle
import asyncio
import gc
import types


class BaseError(BaseException):
    pass


async def _run_taskgroup():
    exc = BaseError()
    try:
        async with asyncio.TaskGroup() as tg:
            async def boom():
                raise exc
            tg.create_task(boom())
    except* BaseError:
        pass
    return exc


def referrer_frames():
    exc = asyncio.run(_run_taskgroup())
    gc.collect()
    return [ref for ref in gc.get_referrers(exc) if isinstance(ref, types.FrameType)]
=
asyncio = __dp__.import_("asyncio", __spec__)
gc = __dp__.import_("gc", __spec__)
types = __dp__.import_("types", __spec__)
def _dp_ns_BaseError(_dp_class_ns):

    def _dp_lambda_7():
        return __name__$0
    _dp_lambda_7 = __dp__.update_fn(_dp_lambda_7, None, "<lambda>")
    __dp__.setattr(_dp_class_ns, "__module__", __dp__.class_lookup(_dp_class_ns, "__name__", _dp_lambda_7))
    __dp__.setattr(_dp_class_ns, "__qualname__", "BaseError")
BaseError = __dp__.create_class("BaseError", _dp_ns_BaseError, (BaseException,), None)
async def _run_taskgroup():
    exc = BaseError$0()
    try:
        _dp_tmp_2 = await __dp__.with_aenter(asyncio$0.TaskGroup())
        try:
            _dp_tmp_3 = __dp__.unpack(_dp_tmp_2, (True, True))
            tg = __dp__.getitem(_dp_tmp_3, 0)
            _dp_with_exit_1 = __dp__.getitem(_dp_tmp_3, 1)
        finally:
            _dp_tmp_3 = None
            _dp_tmp_2 = None
        try:

            async def boom():
                raise exc$1
            tg.create_task(boom())
        except:
            await __dp__.with_aexit(_dp_with_exit_1, __dp__.exc_info())
        else:
            await __dp__.with_aexit(_dp_with_exit_1, None)
        finally:
            _dp_with_exit_1 = None
    except* BaseError$0:
        pass
    return exc
def referrer_frames():
    exc = asyncio$0.run(_run_taskgroup$0())
    gc$0.collect()

    def _dp_gen_4(_dp_iter_5):
        _dp_iter_6 = __dp__.iter(_dp_iter_5)
        try:
            while True:
                ref = __dp__.next(_dp_iter_6)
                if isinstance$0(ref, types$0.FrameType):
                    yield ref
        except:
            if __dp__.exception_matches(__dp__.current_exception(), StopIteration$0):
                pass
            else:
                raise
    _dp_gen_4 = __dp__.update_fn(_dp_gen_4, "referrer_frames.<locals>", "<genexpr>")
    return __dp__.list(_dp_gen_4(__dp__.iter(gc$0.get_referrers(exc))))
