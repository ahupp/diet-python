$ async with missing aexit
from __future__ import annotations

import asyncio


class CM:
    async def __aenter__(self):
        return "entered"


async def run():
    async with CM():
        return "body"


def get_result():
    try:
        asyncio.run(run())
    except TypeError as exc:
        return str(exc)
    return "no error"
=
asyncio = __dp__.import_("asyncio", __spec__)
def _dp_create_class_CM():

    def _dp_ns_builder(_dp_class_ns):

        def _dp_lambda_1():
            return __name__
        _dp_lambda_1.__name__ = "<lambda>"
        _dp_lambda_1.__qualname__ = "<lambda>"
        _dp_class_ns.__module__ = __dp__.class_lookup("__name__", _dp_class_ns, _dp_lambda_1)
        _dp_class_ns.__qualname__ = "CM"

        async def _dp_fn___aenter__(self):
            return "entered"
        _dp_class_ns.__aenter__ = __dp__.update_fn(_dp_fn___aenter__, "CM", "__aenter__")
    return __dp__.create_class("CM", _dp_ns_builder, (), None)
CM = _dp_create_class_CM()
async def _dp_fn_run():
    _dp_with_enter_3 = await __dp__.with_aenter(CM())
    _ = __dp__.getitem(_dp_with_enter_3, 0)
    _dp_with_exit_4 = __dp__.getitem(_dp_with_enter_3, 1)
    _dp_with_active_5 = True
    try:
        return "body"
    except:
        _dp_with_active_5 = False
        await __dp__.with_aexit(_dp_with_exit_4, __dp__.exc_info())
    finally:
        if _dp_with_active_5:
            await __dp__.with_aexit(_dp_with_exit_4, None)
        _dp_with_exit_4 = None
        _dp_with_enter_3 = None
run = __dp__.update_fn(_dp_fn_run, None, "run")
del _dp_fn_run
def _dp_fn_get_result():
    try:
        asyncio.run(run())
    except:
        if __dp__.exception_matches(__dp__.current_exception(), TypeError):
            exc = __dp__.current_exception()
            try:
                return str(exc)
            finally:
                try:
                    del exc
                except:
                    if __dp__.exception_matches(__dp__.current_exception(), NameError):
                        pass
                    else:
                        raise
        else:
            raise
    return "no error"
get_result = __dp__.update_fn(_dp_fn_get_result, None, "get_result")
del _dp_fn_get_result
