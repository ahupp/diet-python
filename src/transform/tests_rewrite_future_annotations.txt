$ rewrites function annotations

from __future__ import annotations

def f(x: list[int], y: dict[str, int]) -> tuple[str, ...]:
    return x
=
def _dp_fn_f(x: "list[int]", y: "dict[str, int]") -> "tuple[str, ...]":
    return x
f = __dp__.update_fn(_dp_fn_f, None, "f")

$ preserves other future imports

from __future__ import annotations, division

def g(x: int | None):
    pass
=
from __future__ import division
def _dp_fn_g(x: "int | None"):
    pass
g = __dp__.update_fn(_dp_fn_g, None, "g")

$ leaves annotations untouched without future import

def h(x: list[int]):
    return x
=
def _dp_fn_h(x: __dp__.getitem(list, int)):
    return x
h = __dp__.update_fn(_dp_fn_h, None, "h")
