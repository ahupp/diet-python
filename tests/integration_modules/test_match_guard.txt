$ desugars match_guard

def probe(value):
    match value:
        case iterable if not hasattr(iterable, "__next__"):
            return f"no next for {type(iterable).__name__}"
        case _:
            return "has next"
=
import __dp__
def probe(value):
    _dp_match_1 = value
    iterable = _dp_match_1
    if __dp__.not_(hasattr(iterable, "__next__")):
        return "".join(("no next for ", format(type(iterable).__name__)))
    else:
        del iterable
        return "has next"
